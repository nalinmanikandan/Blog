<p style="color: green"><%= notice %></p>

<div class="container">

  <%= form_tag(posts_path, method: "get", class: "form") do %>
    <div class="form-group">
      <label for="from_date">From Date:</label>
      <%= date_field_tag :from_date, params[:from_date], class: "form-control" %>
    </div>

    <div class="form-group">
      <label for="to_date">To Date:</label>
      <%= date_field_tag :to_date, params[:to_date], class: "form-control" %>
    </div>

    <%= submit_tag "Filter posts", class: "btn btn-primary" %>
    <% end %>

  <h1>Posts</h1>

  <div id="posts">

    <% @posts.each do |post| %>

      <div class="post">

        <p class="post-title align-left">
          <strong>Title:</strong>
          <%= post.title %>
        </p>

        <p class="post-content align-left">
          <strong>Content:</strong>
          <%= post.content %>
        </p>

        <p class="average-rating">
          <strong>Average Rating:</strong>
          <% if post.ratings.any? %>
            <% rating_value = post.rating_average %>
            <span class="star-rating">&#9733;</span> <%= rating_value %>
          <% else %>
            Not rated yet
          <% end %>
        </p>

        <% if current_user.read_posts.include?(post) %>
          <p>This post has been read.</p>
        <% else %>
          <p>This post has not been read yet.</p>
        <% end %>

        <p>
          <%= 0 ||@comments_count[post.id] %> comments
        </p>

        <p class="show-link align-left">
          <%= link_to "Show this post", topic_post_path(post.topic, post), class: "btn btn-primary btn-like-link" %>
        </p>

      </div>
    <% end %>
  </div>

  <div class="new-back">
    <% if params[:topic_id] %>
      <span class="link1"><%= link_to "New post", new_topic_post_path(@topic), class: "btn btn-primary btn-like-link" %></span>    <% end %>

    <span class="link2"><%= link_to "Back to topic", topics_path, class: "btn btn-primary btn-like-link" %></span>
  </div>

  <div class="d-flex"><strong style="margin-top: 10px"><%= will_paginate(@topics) %></strong></div>

</div>
